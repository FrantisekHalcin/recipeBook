"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[596],{596:(S,u,c)=>{c.r(u),c.d(u,{RecipesModule:()=>M});var r=c(5030),R=c(1747),p=c(6538),e=c(9523),l=c(8174),g=c(3649),m=c(4755);let A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-item"]],inputs:{rec:"rec",index:"index"},decls:8,vars:4,consts:[["routerLinkActive","active",1,"list-group-item","list-group-item-danger","clearfix","p-2","m-1","border-bottom","border-dark",2,"cursor","pointer",3,"routerLink"],[1,"float-start"],[1,"fw-bold"],[1,"list-group-item-action"],[1,"float-end"],["alt","",1,"img-fluid",2,"max-height","80px",3,"src"]],template:function(i,n){1&i&&(e.TgZ(0,"a",0)(1,"div",1)(2,"h4",2),e._uU(3),e.qZA(),e.TgZ(4,"p",3),e._uU(5),e.qZA()(),e.TgZ(6,"span",4),e._UZ(7,"img",5),e.qZA()()),2&i&&(e.Q6J("routerLink",n.index),e.xp6(3),e.Oqu(n.rec.name),e.xp6(2),e.Oqu(n.rec.description),e.xp6(2),e.s9C("src",n.rec.imageUrl,e.LSH))},dependencies:[p.rH,p.Od],styles:["a[_ngcontent-%COMP%]{background-color:#384631;color:#fff}a.active[_ngcontent-%COMP%]{background-color:#75c247;color:#103301}"]}),t})();function C(t,o){if(1&t&&e._UZ(0,"app-recipe-item",6),2&t){const n=o.index;e.Q6J("rec",o.$implicit)("index",n)}}let T=(()=>{class t{constructor(i,n){this.rec=i,this.ds=n}ngOnInit(){this.recipes=this.rec.getRecipes(),this.sub2=this.ds.fetchRecipes().subscribe(i=>{this.recipes=i}),this.sub=this.rec.recipesChanged.subscribe(i=>{this.recipes=i})}ngOnDestroy(){this.sub.unsubscribe(),this.sub2.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(l.v),e.Y36(g.Z))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-list"]],decls:7,vars:1,consts:[[1,"row","mt-3"],[1,"col-xs-12"],["routerLink","new",1,"btn","btn-success","mx-3"],[1,"row"],[1,"col-xs-12","m-2","p-2"],[3,"rec","index",4,"ngFor","ngForOf"],[3,"rec","index"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e._uU(3,"New Recipe"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4),e.YNc(6,C,1,2,"app-recipe-item",5),e.qZA()()),2&i&&(e.xp6(6),e.Q6J("ngForOf",n.recipes))},dependencies:[m.sg,p.rH,A]}),t})(),b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipes"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-recipe-list"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()())},dependencies:[p.lC,T]}),t})();var _=c(5698),w=c(4004),y=c(5349);let U=(()=>{class t{constructor(i,n){this.as=i,this.router=n}canActivate(i,n){return this.as.user.pipe((0,_.q)(1),(0,w.U)(s=>!!s||this.router.createUrlTree(["/auth"])))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(y.e),e.LFG(p.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),F=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-start-recipes"]],decls:2,vars:0,consts:[[1,"text-center","p-5","mt-5"]],template:function(i,n){1&i&&(e.TgZ(0,"h2",0),e._uU(1,"Please choose your favourite food and enjoy cooking :)"),e.qZA())}}),t})();var f=c(4736);function k(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",19)(1,"div",20),e._UZ(2,"input",21),e.qZA(),e.TgZ(3,"div",22),e._UZ(4,"input",23),e.qZA(),e.TgZ(5,"div",24)(6,"button",5),e.NdJ("click",function(){const a=e.CHM(i).index,d=e.oxw();return e.KtG(d.deleteIng(a))}),e._uU(7,"X"),e.qZA()()()}2&t&&e.Q6J("formGroupName",o.index)}let h=(()=>{class t{constructor(i,n,s,a,d){this.route=i,this.rs=n,this.fb=s,this.router=a,this.t=d,this.editMode=!1}ngOnInit(){this.route.params.subscribe(i=>{this.id=+i.id,this.editMode=null!=i.id,this.initForm()})}initForm(){let i="",n="",s="",a=new r.Oe([]);if(this.editMode){const d=this.rs.getRecipe(this.id);if(i=d.name,n=d.imageUrl,s=d.description,d.ingredients)for(let Z of d.ingredients)a.push(new r.cw({ingName:new r.NI(Z.ingName,r.kI.required),ingAmount:new r.NI(Z.ingAmount,[r.kI.required,r.kI.pattern(/^[0-9]*$/)])}))}this.recForm=this.fb.group({name:[i,r.kI.required],imageUrl:[n,r.kI.required],description:[s,r.kI.required],ingredients:a})}get controls(){return this.recForm.get("ingredients").controls}onSubmit(){this.editMode?(this.rs.saveRecipe(this.recForm.value,this.id),this.t.snack("The recipe was saved")):(this.rs.addRecipe(this.recForm.value),this.t.snack("The recipe was added to the list")),this.goAway()}addNewIng(){this.recForm.get("ingredients").push(new r.cw({ingName:new r.NI("",r.kI.required),ingAmount:new r.NI("",[r.kI.required,r.kI.pattern(/^[0-9]*$/)])}))}deleteIng(i){this.recForm.get("ingredients").removeAt(i)}goAway(){this.router.navigate(["../"],{relativeTo:this.route})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(p.gz),e.Y36(l.v),e.Y36(r.qu),e.Y36(p.F0),e.Y36(f.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-recipe"]],decls:39,vars:4,consts:[[1,"row","p-5"],[1,"col-sm-12"],[3,"formGroup","ngSubmit"],[1,"row","m-3"],["type","submit",1,"btn","btn-primary","mx-3",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["for","img"],["type","text","id","img","formControlName","imageUrl",1,"form-control"],["img",""],[1,"img-fluid",3,"src"],["for","des"],["type","text","id","des","formControlName","description","rows","5",1,"form-control"],["formArrayName","ingredients",1,"col-sm-12"],["class","row m-1",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-sm-12","text-end","pe-5"],["type","button",1,"btn","btn-success",3,"click"],[1,"row","m-1",3,"formGroupName"],[1,"col-sm-8"],["type","text","formControlName","ingName",1,"form-control"],[1,"col-sm-3"],["type","number","formControlName","ingAmount","min","0",1,"form-control"],[1,"col-sm-1"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"div",3)(4,"div",1)(5,"button",4),e._uU(6,"Save"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.goAway()}),e._uU(8,"Cancel"),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",1)(11,"div",6)(12,"label",7),e._uU(13,"Name"),e.qZA(),e._UZ(14,"input",8),e.qZA()()(),e.TgZ(15,"div",3)(16,"div",1)(17,"div",6)(18,"label",9),e._uU(19,"Image URL"),e.qZA(),e._UZ(20,"input",10,11),e.qZA()()(),e.TgZ(22,"div",3)(23,"div",1),e._UZ(24,"img",12),e.qZA()(),e.TgZ(25,"div",3)(26,"div",1)(27,"div",6)(28,"label",13),e._uU(29,"Description"),e.qZA(),e.TgZ(30,"textarea",14),e._uU(31,"                        "),e.qZA()()()(),e.TgZ(32,"div",3)(33,"div",15)(34,"div",6),e.YNc(35,k,8,1,"div",16),e.qZA()()(),e.TgZ(36,"div",17)(37,"button",18),e.NdJ("click",function(){return n.addNewIng()}),e._uU(38,"Add New Ingredient"),e.qZA()()()()()),2&i){const s=e.MAs(21);e.xp6(2),e.Q6J("formGroup",n.recForm),e.xp6(3),e.Q6J("disabled",!n.recForm.valid||!n.recForm.dirty),e.xp6(19),e.Q6J("src",s.value,e.LSH),e.xp6(11),e.Q6J("ngForOf",n.controls)}},dependencies:[r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.sg,r.u,r.x0,r.CE,m.sg],styles:["input.ng-invalid.ng-dirty[_ngcontent-%COMP%], textarea.ng-invalid.ng-dirty[_ngcontent-%COMP%]{border:solid red 2px}"]}),t})();var x=c(4513),I=c(2480);function N(t,o){if(1&t&&(e.TgZ(0,"div",10)(1,"div",14),e._UZ(2,"img",15),e.qZA()()),2&t){const i=e.oxw();e.xp6(2),e.s9C("src",i.clickedR.imageUrl,e.LSH)}}function q(t,o){if(1&t&&(e.TgZ(0,"li",16),e._uU(1),e.qZA()),2&t){const i=o.$implicit;e.xp6(1),e.AsE("",i.ingName," / ",i.ingAmount,"")}}let J=(()=>{class t{constructor(i,n,s,a,d){this.sl=i,this.rs=n,this.route=s,this.router=a,this.t=d}ngOnInit(){this.route.params.subscribe(i=>{this.id=+i.id,this.clickedR=this.rs.getRecipe(this.id)})}addIngs(i){this.sl.addAllIngs(i),this.t.snack("The ingredients was added to the shopping list")}deleteR(){this.rs.deleteRecipe(this.id),this.router.navigate(["../"],{relativeTo:this.route}),this.t.snack("The recipe was deleted","red")}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(x.L),e.Y36(l.v),e.Y36(p.gz),e.Y36(p.F0),e.Y36(f.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-detail"]],decls:29,vars:4,consts:[["class","row",4,"ngIf"],[1,"row","flex-shrink-0"],[1,"col-sm-12"],[1,"d-inline","m-5","text-primary"],[1,"dropdown","me-5","mt-2","float-end"],["type","button","appDropdown","",1,"btn","btn-primary","dropdown-toggle"],[1,"caret"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu",2,"cursor","pointer"],[1,"dropdown-item",3,"click"],["routerLink","edit",1,"dropdown-item"],[1,"row"],[1,"col-xs-12","m-3"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"col-xs-12","pt-2","text-center"],["alt","",1,"img-fluid","mb-2",2,"max-width","100%",3,"src"],[1,"list-group-item"]],template:function(i,n){1&i&&(e.YNc(0,N,3,1,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e._uU(7,"Manage Recipe "),e._UZ(8,"span",6),e.qZA(),e.TgZ(9,"ul",7)(10,"li")(11,"a",8),e.NdJ("click",function(){return n.addIngs(n.clickedR.ingredients)}),e._uU(12,"To Shopping List"),e.qZA()(),e.TgZ(13,"li")(14,"a",9),e._uU(15,"Edit Recipe"),e.qZA()(),e.TgZ(16,"li")(17,"a",8),e.NdJ("click",function(){return n.deleteR()}),e._uU(18,"Delete Recipe"),e.qZA()()()()()(),e.TgZ(19,"div",10)(20,"div",11)(21,"strong"),e._uU(22,"Description"),e.qZA(),e._UZ(23,"br"),e._uU(24),e.qZA()(),e.TgZ(25,"div",10)(26,"div",11)(27,"ul",12),e.YNc(28,q,2,2,"li",13),e.qZA()()()),2&i&&(e.Q6J("ngIf",n.clickedR),e.xp6(4),e.Oqu(n.clickedR.name),e.xp6(20),e.hij(" ",n.clickedR.description," "),e.xp6(4),e.Q6J("ngForOf",n.clickedR.ingredients))},dependencies:[I.w,m.sg,m.O5,p.rH]}),t})(),v=(()=>{class t{constructor(i,n){this.ds=i,this.rs=n}resolve(i,n){const s=this.rs.getRecipes();return 0===s.length?this.ds.fetchRecipes():s}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(g.Z),e.LFG(l.v))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const L=[{path:"",component:b,canActivate:[U],children:[{path:"",component:F},{path:"new",component:h},{path:":id",component:J,resolve:[v]},{path:":id/edit",component:h,resolve:[v]}]}];let O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(L),p.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[r.UX,R.I,O]}),t})()}}]);